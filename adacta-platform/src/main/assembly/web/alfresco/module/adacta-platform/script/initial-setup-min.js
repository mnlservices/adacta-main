function main(){var d=250;var e=4;var c="folders.csv";var g="files.csv";var b="users.csv";var a="groups.csv";var f="memberships.csv";adacta.info("Create users...");createTestUsers(b,d,e);adacta.info("Create groups...");createTestGroups(a,d,e);adacta.info("Create dummy files and folders...");var h=createDummyFolders(c,d,e);createDummyFiles(g,d,e,h);adacta.info("Add memberships...");addMemberships(f,d,e);adacta.info("Create DIS_P8 tables...");createDatabaseTables("create_disp8_tables.sql");adacta.info("Done!")}function createDatabaseTables(b){var a=adacta.getFileFromClasspath(b);adacta.dbExecute(a)}function createDummyFolders(g,e,j){var h=adacta.getHeaderQNamesFromCsvFile(g);var a=1;var k=adacta.getSiteDocumentLibrary();var c=adacta.makeFolders(k,"Dossiers",true);var b=new java.util.HashMap();var f=0;for(var d=0;d<h.length;d++){if(h[d]==="{http://www.alfresco.org/model/content/1.0}name"){f=d;break}}batchExecuter.processArray({items:adacta.getFileFromClasspath(g).split("\n"),batchSize:e,threads:j,onNode:function(i){var m=adacta.createDummyFileFolder(c,a,i,h,null);var l=i.split(";")[f];b[l]=(""+m).toString();a++}});return b}function createDummyFiles(e,f,g,d){var h=adacta.getHeaderQNamesFromCsvFile(e);var c=1;var b=adacta.getSiteDocumentLibrary();var a=adacta.makeFolders(b,"Dossiers",true);batchExecuter.processArray({items:adacta.getFileFromClasspath(e).split("\n"),batchSize:f,threads:g,onNode:function(i){adacta.createDummyFileFolder(a,c,i,h,d);c++}})}function createTestUsers(b,c,d){var e=adacta.getHeaderQNamesFromCsvFile(b);var a=1;batchExecuter.processArray({items:adacta.getFileFromClasspath(b).split("\n"),batchSize:c,threads:d,onNode:function(f){adacta.createUser(a,f,e);a++}})}function createTestGroups(b,c,d){var e=adacta.getHeaderQNamesFromCsvFile(b);var a=1;batchExecuter.processArray({items:adacta.getFileFromClasspath(b).split("\n"),batchSize:c,threads:d,onNode:function(f){adacta.createGroup(a,f,e);a++}})}function addMemberships(b,c,e){var d=adacta.getHeaderNamesFromCsvFile(b);var a=1;batchExecuter.processArray({items:adacta.getFileFromClasspath(b).split("\n"),batchSize:c,threads:e,onNode:function(f){adacta.addMembership(a,f,d);a++}})}main();